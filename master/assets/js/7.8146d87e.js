(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{424:function(t,s,a){"use strict";a.r(s);var n=a(33),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"doris-document"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#doris-document"}},[t._v("#")]),t._v(" Doris Document")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/vuejs/vuepress.git",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vuepress"),a("OutboundLink")],1),t._v(" is used as our document site generator, configurations are in "),a("code",[t._v("./docs/.vuepress")]),t._v(" folder.")]),t._v(" "),a("h2",{attrs:{id:"getting-started"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#getting-started"}},[t._v("#")]),t._v(" Getting Started")]),t._v(" "),a("p",[t._v("Download and install "),a("a",{attrs:{href:"http://nodejs.cn/download/",target:"_blank",rel:"noopener noreferrer"}},[t._v("nodejs"),a("OutboundLink")],1)]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" config "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" registry https://registry.npm.taobao.org // Only "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" you are "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" Mainland China.\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" docs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n")])])]),a("p",[t._v("Open your browser and navigate to "),a("code",[t._v("localhost:8080/en/")]),t._v(" or "),a("code",[t._v("localhost:8080/zh-CN/")]),t._v(".")]),t._v(" "),a("h2",{attrs:{id:"docs-directories"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docs-directories"}},[t._v("#")]),t._v(" Docs' Directories")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n  ├─ docs/\n  │  ├─ .vuepress\n  │  │  ├─ dist // Built site files.\n  │  │  ├─ public // Assets\n  │  │  ├─ sidebar // Side bar configurations.\n  │  │  │  ├─ en.js\n  │  │  │  └─ zh-CN.js\n  │  ├─ theme // Global styles and customizations.\n  │  └─ config.js // Vuepress configurations.\n  ├─ zh-CN/\n  │  ├─ xxxx.md\n  │  └─ README.md // Will be rendered as entry page.\n  └─ en/\n     ├─ one.md\n     └─ README.md // Will be rendered as entry page.\n")])])]),a("h2",{attrs:{id:"start-writing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-writing"}},[t._v("#")]),t._v(" Start Writing")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Write markdown files in multi languages and put them in separated folders "),a("code",[t._v("./en/")]),t._v(" and "),a("code",[t._v("./zh-CN/")]),t._v(". "),a("strong",[t._v("But they should be with the same name.")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n├─ en/\n│  ├─ one.md\n│  └─ two.md\n└─ zh-CN/\n│  ├─ one.md\n│  └─ two.md\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Frontmatters like below should always be on the top of each file:")]),t._v(" "),a("div",{staticClass:"language-markdown extra-class"},[a("pre",{pre:!0,attrs:{class:"language-markdown"}},[a("code",[a("span",{pre:!0,attrs:{class:"token hr punctuation"}},[t._v("---")]),t._v('\n{\n    "title": "Backup and Recovery", // sidebar title\n    "language": "en" // writing language\n'),a("span",{pre:!0,attrs:{class:"token title important"}},[t._v("}\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")])]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Assets are in "),a("code",[t._v(".vuepress/public/")]),t._v(".")]),t._v(" "),a("p",[t._v("Assuming that there exists a png "),a("code",[t._v(".vuepress/public/images/image_x.png")]),t._v(", then it can be used like:")]),t._v(" "),a("div",{staticClass:"language-markdown extra-class"},[a("pre",{pre:!0,attrs:{class:"language-markdown"}},[a("code",[a("span",{pre:!0,attrs:{class:"token url"}},[t._v("!["),a("span",{pre:!0,attrs:{class:"token content"}},[t._v("alter text")]),t._v("](/images/image_x.png)")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Remember to update the sidebar configurations in "),a("code",[t._v(".vuepress/sidebar/")]),t._v(" after adding a new file or a folder.")]),t._v(" "),a("p",[t._v("Assuming that the directories are:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n├─ en/\n│  ├─ subfolder\n│  │  ├─ one.md\n│  │  └─ two.md\n│  └─ three.md\n└─ zh-CN/\n   ├─ subfolder\n   │  ├─ one.md\n   │  └─ two.md\n   └─ three.md\n")])])]),a("p",[t._v("Then the sidebar configurations would be like:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .vuepress/sidebar/en.js`")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"subfolder name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    directoryPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"subfolder/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    children"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"one"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"two"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"three"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// .vuepress/sidebar/zh-CN.js")]),t._v("\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    title"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"文件夹名称"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    directoryPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"subfolder/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    children"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"one"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"two"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"three"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("Run "),a("code",[t._v("npm run lint")]),t._v(" before starting a PR.")])])]),t._v(" "),a("p",[t._v("Surely that there will be lots of error logs if the mardown files are not following the rules, and these logs will all be printed in the console:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("\nen/administrator-guide/alter-table/alter-table-bitmap-index.md:92 MD040/fenced-code-language Fenced code blocks should have a language specified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Context: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"    ``'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/alter-table/alter-table-rollup.md:45 MD040/fenced-code-language Fenced code blocks should have a language specified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v('Context: "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("`"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/alter-table/alter-table-rollup.md:77 MD040/fenced-code-language Fenced code blocks should have a language specified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v('Context: "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("`"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/alter-table/alter-table-rollup.md:178 MD046/code-block-style Code block style "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Expected: fenced"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Actual: indented"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/alter-table/alter-table-schema-change.md:50 MD040/fenced-code-language Fenced code blocks should have a language specified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v('Context: "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("`"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/alter-table/alter-table-schema-change.md:82 MD040/fenced-code-language Fenced code blocks should have a language specified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v('Context: "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("`"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/alter-table/alter-table-schema-change.md:127 MD040/fenced-code-language Fenced code blocks should have a language specified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v('Context: "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("`"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/alter-table/alter-table-schema-change.md:144 MD040/fenced-code-language Fenced code blocks should have a language specified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v('Context: "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("`"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/alter-table/alter-table-schema-change.md:153 MD040/fenced-code-language Fenced code blocks should have a language specified "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v('Context: "'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v('``"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/alter-table/alter-table-schema-change.md:199 MD046/code-block-style Code block style "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Expected: fenced"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Actual: indented"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/backup-restore.md:45:1 MD029/ol-prefix Ordered list item prefix "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Expected: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Actual: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Style: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/backup-restore.md:57:1 MD029/ol-prefix Ordered list item prefix "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Expected: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Actual: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Style: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nen/administrator-guide/backup-restore.md:61:1 MD029/ol-prefix Ordered list item prefix "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("Expected: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Actual: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" Style: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("/1/1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" code ELIFECYCLE\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" errno "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" docs@ lint: "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("markdownlint "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'**/*.md'")]),t._v(" -f"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Exit status "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" ERR"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Failed at the docs@ lint script.\n\n")])])]),a("h2",{attrs:{id:"deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deployment"}},[t._v("#")]),t._v(" Deployment")]),t._v(" "),a("p",[t._v("Just start a PR, and all things will be done automatically.")]),t._v(" "),a("h2",{attrs:{id:"what-travis-does"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#what-travis-does"}},[t._v("#")]),t._v(" What Travis Does")]),t._v(" "),a("p",[t._v("Once a PR accepted, travis ci will be triggered to build and deploy the whole website within its own branch. Here is what "),a("code",[t._v(".travis.yml")]),t._v(" does:")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Prepare nodejs and vuepress enviorment.")])]),t._v(" "),a("li",[a("p",[t._v("Use current branch's name as the relative url path in "),a("code",[t._v(".vuepress/config.js")]),t._v("(which is the "),a("code",[t._v("base")]),t._v(" property).")])]),t._v(" "),a("li",[a("p",[t._v("Build the documents into a website all by vuepress.")])]),t._v(" "),a("li",[a("p",[t._v("Fetch asf-site repo to local directory, and copy "),a("code",[t._v(".vupress/dist/")]),t._v(" into "),a("code",[t._v("{BRANCH}/")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("Push the new site to asf-site repo with "),a("code",[t._v("GitHub Token")]),t._v("(which is preset in Travis console as a variable used in .travis.yml).")])])]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("language")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node_js\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nodejs版本")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("node_js")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" \n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'8'")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Travis-CI Caching")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("directories")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" docs/node_modules\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# S: Build Lifecycle")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("install")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" cd docs "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" npm install\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("before_script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" export PR=https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//api.github.com/repos/$TRAVIS_REPO_SLUG/pulls/$TRAVIS_PULL_REQUEST\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" export BRANCH=$(if "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v(' "$TRAVIS_PULL_REQUEST" == "false" '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("; then echo $TRAVIS_BRANCH; else echo `curl "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("s $PR "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),t._v(" jq "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("r .head.ref`; fi)\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" echo $BRANCH\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" sed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("i 's/base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(".*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("/base"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\\\"\\/'$BRANCH'\\/\\\""),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("/g' .vuepress/config.js \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" sed "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("i 's/docsBranch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(".*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("/docsBranch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\\\"'$BRANCH'\\\""),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("/g' .vuepress/config.js \n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" rm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rf site"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("repo\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' git config user.name "$'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("GIT_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('"\n  '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' git config user.email "$'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("GIT_EMAIL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('"\n  '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" git clone https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SITE_REPO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" site"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("repo\n  \n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm run build\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("after_script")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" cd site"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("repo\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mkdir "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("p $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("BRANCH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" rm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("rf $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("BRANCH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/*\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" cp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("r ../.vuepress/dist/* ./$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("BRANCH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" git checkout $"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SITE_BRANCH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" git add .\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" git commit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('am "Auto Build"\n  '),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" git push "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("force "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('quiet "https'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SITE_PUSH_TOKEN"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("@$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SITE_REPO"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v('" $'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SITE_BRANCH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SITE_BRANCH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("only")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /^branch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("."),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("*$/")]),t._v("\n")])])]),a("h2",{attrs:{id:"asf-site-repository"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#asf-site-repository"}},[t._v("#")]),t._v(" asf-site repository")]),t._v(" "),a("p",[t._v("Finally the asf-site repository will be like:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n├─ master/\n│  ├─ en/\n│  │  ├─ subfolder\n│  │  │  ├─ one.md\n│  │  └─ three.md\n│  └─ zh-CN/\n│      ├─ subfolder\n│      │  ├─ one.md\n│      └─ three.md\n├─ incubating-0.11/\n│  ├─ en/\n│  │  ├─ subfolder\n│  │  │  ├─ one.md\n│  │  └─ three.md\n│  └─ zh-CN/\n│      ├─ subfolder\n│      │  ├─ one.md\n│      └─ three.md\n├─ index.html // user entry, and auto redirected to master folder\n└─ versions.json // all versions that can be seleted on the website are defined here\n")])])]),a("p",[t._v("And the "),a("code",[t._v("versions.json")]),t._v(" is like:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"en"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Versions"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dropdown label")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"items"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"master"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// dropdown-item label")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"link"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/../master/en/installing/compilation.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// entry page for this version")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"target"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_blank"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"branch-0.11"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"link"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/../branch-0.11/en/installing/compilation.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"target"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_blank"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"zh-CN"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"版本"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"items"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"master"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"link"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/../master/zh-CN/installing/compilation.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"target"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_blank"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"text"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"branch-0.11"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"link"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/../branch-0.11/zh-CN/installing/compilation.html"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"target"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"_blank"')]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);